#include "defines.h"
#include "Command.h"
#include "Averager.h"
#include <cstring>


/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
static int numAverage = 0;


static uint16 dataX[5][TESTER_NUM_POINTS] __attribute__((section("CCM_DATA")));
static uint8 dataY[5][TESTER_NUM_POINTS] __attribute__((section("CCM_DATA")));


/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
void Averager::Tester::SetCount(int count)
{
    numAverage = count;
}

//-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
void Averager::Tester::SetDataX(uint16 *data, int step)
{
    std::memcpy(&dataX[step][0], data, TESTER_NUM_POINTS * 2);
}

//-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
void Averager::Tester::SetDataY(uint8 *data, int step)
{
    std::memcpy(&dataY[step][0], data, TESTER_NUM_POINTS);
}

//-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
uint16 *Averager::Tester::GetDataX(int step)
{
    return &dataX[step][0];
}

//-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
uint8 *Averager::Tester::GetDataY(int step)
{
    return &dataY[step][0];
}
